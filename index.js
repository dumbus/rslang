(()=>{"use strict";var e={61:(e,t,s)=>{s.r(t)},535:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateUserStatistics=t.getUserStatistics=t.checkLogin=t.signIn=t.createUser=t.updateUserWord=t.createUserWord=t.getUserWordById=t.getUserWords=t.getWordsAllGroup=t.getWord=t.getWords=t.BASE=void 0;const n=s(299),i=s(917),a=s(897);t.BASE="https://rs-lang-bckend.herokuapp.com/";const r=`${t.BASE}words`;t.getWords=function(e=0,t=0){return o(this,void 0,void 0,(function*(){const s=yield fetch(`${r}?group=${e}&page=${t}`);return yield s.json()}))},t.getWord=function(e){return o(this,void 0,void 0,(function*(){const t=yield fetch(`${r}/${e}`);return yield t.json()}))},t.getWordsAllGroup=function(e="0"){return o(this,void 0,void 0,(function*(){const t=[];for(let s=0;s<30;s+=1)t.push(fetch(`${r}?group=${e}&page=${s}`));const s=yield Promise.all(t),o=[];for(let e=0;e<30;e+=1)o.push(yield s[e].json());return[].concat(...o)}))};const d=()=>o(void 0,void 0,void 0,(function*(){const e=JSON.parse(localStorage.getItem("user")),s=yield fetch(`${t.BASE}users/${e.userId}/tokens`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.refreshToken}`}});if(403===s.status)throw(()=>{localStorage.removeItem("login"),sessionStorage.setItem("authorisation-state","login");const e=document.querySelector(".main");e.innerHTML="",e.append((0,a.createAuthorisation)()),(0,i.addAuthorisationListeners)()})(),new Error("Access token is missing, expired or invalid");const o=yield s.json();return localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("login","+"),!0}));t.getUserWords=(e,s)=>o(void 0,void 0,void 0,(function*(){const o=yield fetch(`${t.BASE}users/${e}/words`,{method:"GET",headers:{Authorization:`Bearer ${s}`}});let n;if(401===o.status){if(!(yield d()))throw new Error("Sign In");{const s=JSON.parse(localStorage.getItem("user"));n=yield(0,t.getUserWords)(e,s.token)}}else n=yield o.json();return n})),t.getUserWordById=(e,s,n)=>o(void 0,void 0,void 0,(function*(){const o=yield fetch(`${t.BASE}users/${e}/words/${s}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});let i=yield o.json();if(401===o.status){if(!(yield d()))throw new Error("Sign In");{const o=JSON.parse(localStorage.getItem("user"));i=yield(0,t.getUserWordById)(e,s,o.token)}}return delete i.id,delete i.wordId,i})),t.createUserWord=(e,s,n,i)=>o(void 0,void 0,void 0,(function*(){if(401===(yield fetch(`${t.BASE}users/${e}/words/${s}`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}})).status){if(!(yield d()))throw new Error("Sign In");{const o=JSON.parse(localStorage.getItem("user"));(0,t.createUserWord)(e,s,n,o.token)}}})),t.updateUserWord=(e,s,n,i)=>o(void 0,void 0,void 0,(function*(){if(401===(yield fetch(`${t.BASE}users/${e}/words/${s}`,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}})).status){if(!(yield d()))throw new Error("Sign In");{const o=JSON.parse(localStorage.getItem("user"));(0,t.updateUserWord)(e,s,n,o.token)}}})),t.createUser=(e,s,n)=>o(void 0,void 0,void 0,(function*(){const o={name:e,email:s,password:n};422===(yield fetch(`${t.BASE}users`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}})).status&&console.log("Incorrect e-mail or password")}));const c=e=>{const t=document.createElement("p");t.textContent=e,t.style.color="red",document.querySelector(".authorisation-modal-form").prepend(t),setTimeout((()=>{t.remove()}),2e3)};t.signIn=(e,s)=>o(void 0,void 0,void 0,(function*(){const o={email:e,password:s},n=yield fetch(`${t.BASE}signin`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}});if(403===n.status||422===n.status)throw c("Не корректный e-mail или пароль"),new Error("Incorrect e-mail or password");if(404===n.status)throw c("Не верный логин или пароль"),new Error("Not found");const i=yield n.json();localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("login","+")})),t.checkLogin=()=>{if("+"===localStorage.getItem("login")){const e=JSON.parse(localStorage.getItem("user"));(0,t.getUserWords)(e.userId,e.token)}},t.getUserStatistics=(e,s)=>o(void 0,void 0,void 0,(function*(){const o=yield fetch(`${t.BASE}users/${e}/statistics`,{method:"GET",headers:{Authorization:`Bearer ${s}`}});let i;if(401===o.status){if(!(yield d()))throw new Error("Sign In");{const s=JSON.parse(localStorage.getItem("user"));i=yield(0,t.getUserStatistics)(e,s.token)}}else if(404===o.status)i=n.DEFAULT_STAT;else{const e=yield o.json();delete e.id,i=e,i.optional.date!==(new Date).getDate()&&(i=n.DEFAULT_STAT)}return i})),t.updateUserStatistics=(e,s,n)=>o(void 0,void 0,void 0,(function*(){if(401===(yield fetch(`${t.BASE}users/${e}/statistics`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(n)})).status){if(!(yield d()))throw new Error("Sign In");{const s=JSON.parse(localStorage.getItem("user"));(0,t.updateUserStatistics)(e,s.token,n)}}}))},209:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(535),i=s(605),a=s(17),r=s(398),d=s(917),c={title:"Спринт",text:"«Спринт» - это веселый способ выучить новые слова. Вам нужно будет выбрать соответствует ли перевод предложенному слову."},l={title:"Аудиовызов",text:"«Аудиовызов» - это тренировка, которая поможет развить ваш навык аудирования. Вам нужно будет выбрать верное услышанное слова."};class u{constructor(e){this.type=e,this.description="sprint"===e?c:l,this.root=document.querySelector(".main"),this.wordNumber=0,this.score=0,this.addScore=10,this.scoreLevel=0,this.correctAnswer=1===(0,i.randomInteger)(0,1),this.audioCorrect=new Audio("./assets/audio/correct.mp3"),this.audioWrong=new Audio("./assets/audio/error.mp3"),this.audioFinish=new Audio("./assets/audio/finish.mp3"),this.timer=60,this.answers={correct:[],wrong:[]},this.mute=!1}updateScoreLevel(){this.scoreLevel+=1,this.scoreLevel>3&&(this.scoreLevel=0,this.addScore*=2),this.addScore>80&&(this.addScore=80,this.scoreLevel=3)}getResultItems(e){const t=document.createElement("div");return e.forEach((e=>{const s=new Audio(`${n.BASE}${this.words[e].audio}`),o=document.createElement("div");o.className="result__item",o.innerHTML=`<div class="result__item_btn">\n        <img src="./assets/svg/audio.svg" alt="audio" class="result__item_btn-img">\n      </div>\n      <p class="result__item_text">\n        ${this.words[e].word} <span class="result__item_trans">${this.words[e].transcription}</span>\n        <span class="result__item_translate">-</span>\n        <span class="result__item_translate">${this.words[e].wordTranslate}</span>\n      </p>`,o.querySelector(".result__item_btn").addEventListener("click",(()=>{s.currentTime=0,s.play()})),t.append(o)})),t}pushResult(e){return o(this,void 0,void 0,(function*(){const t=JSON.parse(localStorage.getItem("user")),s=t.userId,o=t.token,i=yield(0,n.getUserWords)(s,o),a=yield(0,n.getUserStatistics)(s,o),r="sprint"===this.type?a.optional.sprint:a.optional.audiocall;a.optional.date=(new Date).getDate();const d=i.map((e=>e.optional.wordID)),c=[];e.correct.forEach((e=>{c.push({wordID:this.words[e].id,correct:!0})})),e.wrong.forEach((e=>{c.push({wordID:this.words[e].id,correct:!1})}));for(const e of c)if(d.includes(e.wordID)){const t=yield(0,n.getUserWordById)(s,e.wordID,o);e.correct?("new"===t.difficulty&&(t.optional.correctAnswers+=1,3===t.optional.correctAnswers&&(t.difficulty="done",a.learnedWords+=1)),"difficult"===t.difficulty&&(t.optional.correctAnswers+=1,5===t.optional.correctAnswers&&(t.difficulty="done",a.learnedWords+=1))):(t.optional.correctAnswers=0,t.difficulty="difficult"===t.difficulty?"difficult":"new"),console.log(t),yield(0,n.updateUserWord)(s,e.wordID,t,o)}else{const t={difficulty:"new",optional:{wordID:e.wordID,correctAnswers:e.correct?1:0}};(0,n.createUserWord)(s,e.wordID,t,o),r.newWords+=1}"sprint"===this.type?(a.optional.sprint=r,a.optional.sprint.totalAnswers+=c.length,a.optional.sprint.totalRight+=e.correct.length,a.optional.sprint.percent=Math.round(a.optional.sprint.totalRight/a.optional.sprint.totalAnswers*100),a.optional.sprint.bestResult<this.score&&(a.optional.sprint.bestResult=this.score)):(a.optional.audiocall=r,a.optional.audiocall.totalAnswers+=c.length,a.optional.audiocall.totalRight+=e.correct.length,a.optional.audiocall.percent=Math.round(a.optional.audiocall.totalRight/a.optional.audiocall.totalAnswers*100),a.optional.audiocall.bestResult<this.answers.correct.length&&(a.optional.audiocall.bestResult=this.answers.correct.length)),a.optional.totalNewWord=a.optional.sprint.newWords+a.optional.audiocall.newWords,a.optional.totalPercent=(a.optional.audiocall.totalRight+a.optional.sprint.totalRight)/(a.optional.audiocall.totalAnswers+a.optional.sprint.totalAnswers),a.optional.totalPercent=Math.round(100*a.optional.totalPercent),(0,n.updateUserStatistics)(s,o,a)}))}finishGame(){this.audioFinish.play(),document.removeEventListener("keydown",this.checkKey),document.removeEventListener("keydown",this.checkKeyAudiocall),this.section.innerHTML="";const e=document.createElement("div");e.className="result",e.innerHTML=` <div class="result__total">\n    <h3 class="result__total_stat">Статистика</h3>\n    ${"sprint"===this.type?`<p class="result__total_text">Набрано ${this.score} очков.</p>`:""}\n    </div>\n    <div class="result__answers">\n      <div class="result__section">\n        <p class="result__title">Не верные ответы \n        <span class="result__num result__num_wrong">${this.answers.wrong.length}</span></p>\n      </div>\n      <div class="result__section">\n        <p class="result__title">Правильные ответы \n        <span class="result__num result__num_correct">${this.answers.correct.length}</span></p>\n      </div>\n    </div>\n    <div class="result__btns">\n      <button class="result__btn result__btn_close">\n        Закончить игру\n      </button>\n      <button class="result__btn result__btn_again">\n        Еще раз\n      </button>\n    </div>`;const t=e.querySelectorAll(".result__section");t[0].append(this.getResultItems(this.answers.wrong)),t[1].append(this.getResultItems(this.answers.correct)),e.querySelector(".result__btn_again").addEventListener("click",(()=>{(0,i.shuffle)(this.words),u.inst=new u(this.type),u.inst.render(this.words)})),e.querySelector(".result__btn_close").addEventListener("click",(()=>o(this,void 0,void 0,(function*(){if(u.textbook){this.root.querySelector("div").classList.add("hidden"),(0,i.addLoader)();const e=Number(sessionStorage.getItem("rs-group")),t=Number(sessionStorage.getItem("rs-page")),s=yield(0,r.createTextbook)(e,t);this.root.innerHTML="",this.root.append(s),(0,d.addTextbookListeners)()}else this.root.innerHTML="",this.root.append((0,a.createMainscreen)())})))),this.section.append(e),"+"===localStorage.getItem("login")&&this.pushResult(this.answers)}toggleMute(){const e=this.section.querySelector(".mute-game");this.mute?(this.mute=!1,e.style.backgroundColor="",this.audioCorrect.muted=!1,this.audioWrong.muted=!1,this.audioFinish.muted=!1):(this.mute=!0,e.style.backgroundColor="#c0c0c0",this.audioCorrect.muted=!0,this.audioWrong.muted=!0,this.audioFinish.muted=!0)}updateGameSprint(e){this.correctAnswer=1===(0,i.randomInteger)(0,1),e?(this.answers.correct.push(this.wordNumber),this.audioCorrect.currentTime=0,this.audioCorrect.play(),this.score+=this.addScore,this.updateScoreLevel()):(this.answers.wrong.push(this.wordNumber),this.audioWrong.currentTime=0,this.audioWrong.play(),this.addScore=10,this.scoreLevel=0),this.wordNumber+=1,this.wordNumber===this.words.length?(clearInterval(this.timerID),this.finishGame()):this.updateSprint(this.correctAnswer)}updateSprint(e){var t;const s=e?this.wordNumber:(0,i.randomNoRepeatNum)(this.wordNumber,this.words.length-1),o=document.createElement("div");o.className="update-sprint",o.innerHTML=`<p class="game__total">Текущий результат ${this.score}</p>\n    <p class="game__add-points">+${this.addScore} очков за слово</p>\n    <ul class="game__dot">\n      <li class="game__dot-item"></li>\n      <li class="game__dot-item"></li>\n      <li class="game__dot-item"></li>\n    </ul>\n    <div class="game__question">\n      <p class="game__question-word">${this.words[this.wordNumber].word}</p>\n      <p class="game__question-translate">${this.words[s].wordTranslate}</p>\n      <div class="game__question-btn">\n        <button class="game__question-btn_item game__question-btn_wrong" data-atr="0">Неверно</button>\n        <button class="game__question-btn_item game__question-btn_correct" data-atr="1">Верно</button>\n      </div>\n    </div>`;const n=this.section.querySelector(".game__main");null===(t=this.section.querySelector(".update-sprint"))||void 0===t||t.remove(),o.querySelectorAll(".game__dot-item").forEach(((e,t)=>{t<this.scoreLevel?e.classList.add("true"):e.classList.remove("true")})),n.prepend(o)}checkKey(e){"ArrowLeft"===e.key&&u.inst.updateGameSprint(!1===u.inst.correctAnswer),"ArrowRight"===e.key&&u.inst.updateGameSprint(!0===u.inst.correctAnswer)}renderSprint(e){this.words=e,(0,i.shuffle)(this.words),this.section=document.createElement("section"),this.section.className="game",this.section.innerHTML=`\n    <button class="close-game">\n      <span class="close-game__span-1"></span>\n      <span class="close-game__span-2"></span>\n    </button>\n    <button class="mute-game"></button>\n      <div class="game__main game__container">\n      <div class="game__timer">\n        <img class="game__timer-img" src="./assets/svg/clock.svg" alt="clock">\n        <p class="game__timer-num">${this.timer}</p>\n      </div>\n    </div>`,this.section.querySelector(".mute-game").addEventListener("click",this.toggleMute.bind(this)),this.section.querySelector(".close-game").addEventListener("click",(()=>o(this,void 0,void 0,(function*(){if(u.textbook){this.root.querySelector("div").classList.add("hidden"),(0,i.addLoader)();const e=Number(sessionStorage.getItem("rs-group")),t=Number(sessionStorage.getItem("rs-page")),s=yield(0,r.createTextbook)(e,t);this.root.innerHTML="",this.root.append(s),(0,d.addTextbookListeners)()}else this.root.innerHTML="",this.root.append((0,a.createMainscreen)());clearInterval(this.timerID),document.removeEventListener("keydown",this.checkKey)})))),this.updateSprint(this.correctAnswer);const t=this.section.querySelector(".game__main"),s=this.section.querySelector(".game__timer-num");t.addEventListener("click",(e=>{const t=e.target;if(t&&t.matches(".game__question-btn_item")){const e="1"===t.dataset.atr;this.updateGameSprint(e===this.correctAnswer)}})),document.addEventListener("keydown",this.checkKey),this.timerID=setInterval((()=>{this.timer-=1,s.textContent=`${this.timer}`,0===this.timer&&(clearInterval(this.timerID),this.finishGame())}),1e3),this.root.innerHTML="",this.root.append(this.section)}updateGameAudiocall(e){e?this.answers.correct.push(this.wordNumber):this.answers.wrong.push(this.wordNumber),this.wordNumber+=1,this.wordNumber===this.words.length?this.finishGame():this.updateAudiocall()}showAudiocallAnswer(){const e=document.querySelector(".game-audio__word"),t=document.querySelector(".game-audio__word_sound"),s=document.querySelector(".game-audio__word_sound-img"),o=document.createElement("p"),i=document.createElement("img"),a=document.createElement("div");e.classList.add("game-audio__word-show"),t.classList.add("game-audio__word_sound-show"),s.classList.add("game-audio__word_sound-img-show"),o.textContent=this.words[this.wordNumber].word,o.className="game-audio__word_text",e.append(o),i.src=`${n.BASE}${this.words[this.wordNumber].image}`,i.className="game-audio__word_img",a.className="game-audio__word_img-inner",a.append(i),e.prepend(a)}checkAudiocall(e){const t=u.inst.section.querySelector(".btn-next"),s=u.inst.section.querySelectorAll(".btn-answer");if(10!==e&&"false"===t.dataset.next){const o=s[e];"true"===o.dataset.correct?(u.inst.correctAnswer=!0,u.inst.audioCorrect.currentTime=0,u.inst.audioCorrect.play()):(u.inst.audioWrong.currentTime=0,u.inst.audioWrong.play(),o.classList.add("game-audio__btn-wrong")),t.dataset.next="true",t.textContent="Следующее",u.inst.section.querySelector('[data-correct="true"]').classList.add("game-audio__btn-right"),u.inst.showAudiocallAnswer()}else 10===e&&("true"===t.dataset.next?(t.dataset.next="false",t.textContent="Не знаю",u.inst.updateGameAudiocall(u.inst.correctAnswer)):(u.inst.audioWrong.currentTime=0,u.inst.audioWrong.play(),u.inst.section.querySelector('[data-correct="true"]').classList.add("game-audio__btn-right"),u.inst.showAudiocallAnswer(),t.dataset.next="true",t.textContent="Следующее"))}updateAudiocall(){var e;const t=new Audio(`${n.BASE}${this.words[this.wordNumber].audio}`),s=(0,i.randomArrNum)(this.wordNumber,this.words.length-1),o=document.createElement("div");this.correctAnswer=!1,o.className="update-audiocall",o.innerHTML=`<p class="game-audio__total">Слово ${this.wordNumber+1} / ${this.words.length}</p>\n    <div class="game-audio__word">\n      <div class="game-audio__word_sound">\n        <img src="./assets/svg/audio.svg" alt="audio" class="game-audio__word_sound-img">\n      </div>\n    </div>\n    <div class="game-audio__answers">\n    </div>`,o.querySelector(".game-audio__word_sound").addEventListener("click",(()=>{t.currentTime=0,t.play()}));const a=o.querySelector(".game-audio__answers");s.forEach(((e,t)=>{const s=document.createElement("button");s.className="game-audio__btn btn-answer",s.textContent=`${t+1} ${this.words[e].wordTranslate}`,s.dataset.correct="false",e===this.wordNumber&&(s.dataset.correct="true"),s.addEventListener("click",(()=>{this.checkAudiocall(t)})),a.append(s)}));const r=this.section.querySelector(".game-audio");null===(e=this.section.querySelector(".update-audiocall"))||void 0===e||e.remove(),r.prepend(o),setTimeout((()=>t.play()),500)}checkKeyAudiocall(e){e.preventDefault();const t=+e.key;t>0&&t<6&&u.inst.checkAudiocall(t-1),"Enter"===e.key&&u.inst.checkAudiocall(10)}renderAudiocall(e){this.words=e,(0,i.shuffle)(this.words),this.section=document.createElement("section"),this.section.className="game",this.section.innerHTML='\n    <button class="close-game">\n      <span class="close-game__span-1"></span>\n      <span class="close-game__span-2"></span>\n    </button>\n    <button class="mute-game"></button>\n    <div class="game-audio game__container">\n    <button class="game-audio__btn btn-next" data-next="false">Не знаю</button>\n    </div>',this.section.querySelector(".mute-game").addEventListener("click",this.toggleMute.bind(this)),this.section.querySelector(".close-game").addEventListener("click",(()=>o(this,void 0,void 0,(function*(){if(u.textbook){this.root.querySelector("div").classList.add("hidden"),(0,i.addLoader)();const e=Number(sessionStorage.getItem("rs-group")),t=Number(sessionStorage.getItem("rs-page")),s=yield(0,r.createTextbook)(e,t);this.root.innerHTML="",this.root.append(s),(0,d.addTextbookListeners)()}else this.root.innerHTML="",this.root.append((0,a.createMainscreen)());document.removeEventListener("keydown",this.checkKeyAudiocall)})))),this.updateAudiocall(),document.addEventListener("keydown",this.checkKeyAudiocall),this.section.querySelector(".btn-next").addEventListener("click",(()=>{this.checkAudiocall(10)})),this.root.innerHTML="",this.root.append(this.section)}render(e){"sprint"===this.type?this.renderSprint(e):this.renderAudiocall(e)}startPage(){this.root.innerHTML=`<section class="description">\n    <button class="close-game">\n      <span class="close-game__span-1"></span>\n      <span class="close-game__span-2"></span>\n    </button>\n    <div class="description__main">\n      <h2 class="description__title">${this.description.title}</h2>\n      <p class="description__text">${this.description.text}</p>\n      <ul class="btn-level">\n        <li class="btn-level_1 btn-number" data-num="0">1</li>\n        <li class="btn-level_2 btn-number" data-num="1">2</li>\n        <li class="btn-level_3 btn-number" data-num="2">3</li>\n        <li class="btn-level_4 btn-number" data-num="3">4</li>\n        <li class="btn-level_5 btn-number" data-num="4">5</li>\n        <li class="btn-level_6 btn-number" data-num="5">6</li>\n      </ul>\n    </div>\n  </section>`,this.root.querySelectorAll(".btn-number").forEach((e=>{e.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){let t;this.root.innerHTML='<div class="lds-ring"><div></div><div></div><div></div><div></div></div>',t="sprint"===this.type?yield(0,n.getWordsAllGroup)(e.dataset.num):yield(0,n.getWords)(Number(e.dataset.num)),(0,i.shuffle)(t),this.render(t)}))))})),this.root.querySelector(".close-game").addEventListener("click",(()=>{this.root.innerHTML="",this.root.append((0,a.createMainscreen)())}))}}t.default=u,u.textbook=!1},299:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_STAT=void 0,t.DEFAULT_STAT={learnedWords:0,optional:{sprint:{newWords:0,percent:0,bestResult:0,totalAnswers:0,totalRight:0},audiocall:{newWords:0,percent:0,bestResult:0,totalAnswers:0,totalRight:0},totalNewWord:0,totalPercent:0,date:0}}},917:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addHeaderListeners=t.addProfileListeners=t.addAuthorisationListeners=t.addTextbookListeners=void 0;const i=n(s(209)),a=s(17),r=s(398),d=s(398),c=s(605),l=s(897),u=s(535),m=s(517);t.addTextbookListeners=()=>o(void 0,void 0,void 0,(function*(){const e=Boolean(localStorage.getItem("login")),s=document.querySelector(".main"),n=document.querySelectorAll(".textbook-word-content-audiobtn"),i=document.querySelectorAll(".textbook-nav-item"),a=document.querySelector(".textbook-pages-item-prev"),l=document.querySelector(".textbook-pages-item-next");if(n.forEach((e=>{e.addEventListener("click",(()=>{(0,d.playAudio)(e)}))})),i.forEach((e=>{e.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){s.querySelector("div").classList.add("hidden"),(0,c.addLoader)();const o=+e.getAttribute("data-num"),n=yield(0,r.createTextbook)(o);s.innerHTML="",s.append(n),(0,t.addTextbookListeners)(),(0,c.disableButtonsForLearnedPages)()}))))})),a.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){s.querySelector("div").classList.add("hidden"),(0,c.addLoader)();const e=+sessionStorage.getItem("rs-group"),o=+sessionStorage.getItem("rs-page"),n=yield(0,r.createTextbook)(e,o-1);s.innerHTML="",s.append(n),(0,t.addTextbookListeners)(),(0,c.disableButtonsForLearnedPages)()})))),l.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){s.querySelector("div").classList.add("hidden"),(0,c.addLoader)();const e=+sessionStorage.getItem("rs-group"),o=+sessionStorage.getItem("rs-page");(0,c.addLoader)();const n=yield(0,r.createTextbook)(e,o+1);s.innerHTML="",s.append(n),(0,t.addTextbookListeners)(),(0,c.disableButtonsForLearnedPages)()})))),e){const e=10,t=8,s=document.querySelectorAll(".textbook-word-content-btns-difficult"),n=document.querySelectorAll(".textbook-word-content-btns-learned"),i=document.querySelectorAll(".textbook-word-content-btns-remove");s.forEach((t=>o(void 0,void 0,void 0,(function*(){t.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){const s=t.getAttribute("id").slice(e),o=t.getAttribute("data-difficulty");yield(0,c.makeWordDifficult)(s,o),t.disabled=!0,document.querySelector(`#learned-${s}`).disabled=!1,(0,c.disableButtonsForLearnedPages)()}))))})))),n.forEach((e=>o(void 0,void 0,void 0,(function*(){e.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){const s=e.getAttribute("id").slice(t),o=e.getAttribute("data-difficulty");yield(0,c.makeWordLearned)(s,o),e.disabled=!0,document.querySelector(`#difficult-${s}`).disabled=!1,(0,c.disableButtonsForLearnedPages)()}))))})))),i.forEach((t=>{t.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){const s=t.getAttribute("id").slice(e);yield(0,c.makeWordNew)(s)}))))}))}})),t.addAuthorisationListeners=()=>{const e=document.querySelector(".authorisation-modal-state");let s=sessionStorage.getItem("authorisation-state");const n=document.querySelector(".main");e.addEventListener("click",(()=>{s="registration"===s?"login":"registration",sessionStorage.setItem("authorisation-state",s);const e=(0,l.createAuthorisation)();n.innerHTML="",n.append(e),(0,t.addAuthorisationListeners)()}));const i=document.querySelector(".authorisation-modal-form"),r=document.querySelector(".authorisation-modal-form-name"),d=document.querySelector(".authorisation-modal-form-email"),c=document.querySelector(".authorisation-modal-form-password");i.addEventListener("submit",(e=>o(void 0,void 0,void 0,(function*(){e.preventDefault();const t=d.value,s=c.value;"registration"===sessionStorage.getItem("authorisation-state")&&(yield(0,u.createUser)(r.value,t,s)),yield(0,u.signIn)(t,s),n.innerHTML="",n.append((0,a.createMainscreen)())}))))},t.addProfileListeners=()=>{const e=document.querySelector(".profile-logout"),t=document.querySelector(".main");e.addEventListener("click",(()=>{localStorage.clear(),sessionStorage.clear(),t.innerHTML="",t.append((0,a.createMainscreen)())}))},t.addHeaderListeners=()=>o(void 0,void 0,void 0,(function*(){const e=document.querySelector(".header-home"),s=document.querySelector(".header-nav-textbook"),n=document.querySelector(".header-nav-sprint"),d=document.querySelector(".header-nav-audio"),p=document.querySelector(".header-nav-authorisation"),h=document.querySelector(".header-nav-stats"),g=document.querySelector(".main");e.addEventListener("click",(()=>{i.default.textbook=!1,g.innerHTML="",g.append((0,a.createMainscreen)()),(0,c.disableButtonsForLearnedPages)()})),s.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){g.querySelector("div").classList.add("hidden"),(0,c.addLoader)();const e=Number(sessionStorage.getItem("rs-group")),s=Number(sessionStorage.getItem("rs-page")),o=yield(0,r.createTextbook)(e,s);g.innerHTML="",g.append(o),(0,t.addTextbookListeners)(),(0,c.disableButtonsForLearnedPages)()})))),n.addEventListener("click",(()=>{sessionStorage.setItem("saved-page","sprint"),i.default.inst=new i.default("sprint"),i.default.textbook?i.default.inst.render(i.default.arrWords):i.default.inst.startPage()})),d.addEventListener("click",(()=>{sessionStorage.setItem("saved-page","audiocall"),i.default.inst=new i.default("audiocall"),i.default.textbook?i.default.inst.render(i.default.arrWords):i.default.inst.startPage()})),p.addEventListener("click",(()=>{let e,s;i.default.textbook=!1,sessionStorage.setItem("saved-page","authorisation"),Boolean(localStorage.getItem("login"))?(e=(0,l.createProfile)(),s=t.addProfileListeners):(e=(0,l.createAuthorisation)(),s=t.addAuthorisationListeners),g.innerHTML="",g.append(e),s(),(0,c.disableButtonsForLearnedPages)()})),null==h||h.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){if(i.default.textbook=!1,"+"===localStorage.getItem("login")){(0,c.addLoader)();const e=JSON.parse(localStorage.getItem("user")),t=yield(0,u.getUserStatistics)(e.userId,e.token);g.innerHTML="",g.append((0,m.createStatistic)(t))}else g.innerHTML="",g.append((0,l.createAuthorisation)()),(0,t.addAuthorisationListeners)();(0,c.disableButtonsForLearnedPages)()}))))}))},17:function(e,t,s){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMainscreen=void 0;const n=o(s(209));t.createMainscreen=()=>{sessionStorage.setItem("saved-page","mainscreen"),n.default.textbook=!1;const e=document.createElement("div");return e.classList.add("mainscreen"),e.innerHTML='\n    <h1 class="mainscreen-title title">Начните изучать английский язык уже сегодня!</h1>\n    <div class="mainscreen-text">\n      <h2 class="mainscreen-text-subtitle subtitle">Зачем учить английский язык?</h2>\n      <ul class="mainscreen-text-reasons">\n        <li class="mainscreen-text-reasons-item">\n          Английский язык – один из наиболее распространённых в мире\n        </li>\n        <li class="mainscreen-text-reasons-item">\n          Английский открывает перед тобой новые возможности\n        </li>\n        <li class="mainscreen-text-reasons-item">\n          Английский делает тебя привлекательнее для работодателей\n        </li>\n        <li class="mainscreen-text-reasons-item">\n          Английский язык открывает тебе путь в лучшие университеты мира\n        </li>\n        <li class="mainscreen-text-reasons-item">\n          Английский улучшает память и помогает держать мозг в тонусе\n        </li>\n      </ul>\n\n      <h2 class="mainscreen-text-subtitle subtitle"> Преимущества нашего приложения:</h2>\n      <ul class="mainscreen-text-advantages">\n        <li class="mainscreen-text-advantages-item">\n          В нашем приложении есть готовые наборы слов с различной сложностью, чтобы Вы могли подобрать подходящий Вам уровень и прогрессировать.\n        </li>\n        <li class="mainscreen-text-advantages-item">\n          Вы можете изучать слова при помощи учебника или мини-игр.\n        </li>\n        <li class="mainscreen-text-advantages-item">\n          После игры слова оказываются в Вашем личном словаре.\n        </li>\n        <li class="mainscreen-text-advantages-item">\n          Вы можете следить за своей статистикой и грамотно выстраивать процесс обучения.\n        </li>\n        <li class="mainscreen-text-advantages-item">\n          Учитесь так, как комфортно Вам!\n        </li>\n      </ul>\n\n      <h2 class="mainscreen-text-subtitle subtitle">Наша команда:</h2>\n      <div class="mainscreen-text-team">\n        <div class="mainscreen-text-team-item">\n          <img class="mainscreen-text-team-item-img" src="./assets/img/maximFed91-avatar.png" alt="maximFed">\n          <a href="https://github.com/MaximFed91" class="mainscreen-text-team-item-link">@MaximFed91</a>\n          <div class="mainscreen-text-item-roles">\n            <span class="mainscreen-text-team-item-role">backend</span>\n            <span class="mainscreen-text-team-item-role">аудиовызов</span>\n            <span class="mainscreen-text-team-item-role">спринт</span>\n          </div>\n        </div>\n\n        <div class="mainscreen-text-team-item">\n          <img class="mainscreen-text-team-item-img" src="./assets/img/dumbus-avatar.png" alt="dumbus">\n          <a href="https://github.com/dumbus" class="mainscreen-text-team-item-link">@Dumbus</a>\n          <div class="mainscreen-text-item-roles">\n            <span class="mainscreen-text-team-item-role">teamlead</span>\n            <span class="mainscreen-text-team-item-role">главная</span>\n            <span class="mainscreen-text-team-item-role">учебник</span>\n            <span class="mainscreen-text-team-item-role">словарь</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  ',e}},897:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderPage=t.createProfile=t.createAuthorisation=void 0;const i=s(17),a=s(398),r=s(517),d=s(917),c=s(605),l=s(535),u=n(s(209));t.createAuthorisation=()=>{sessionStorage.setItem("saved-page","authorisation");let e=sessionStorage.getItem("authorisation-state");null===e&&(e="registration",sessionStorage.setItem("authorisation-state",e));const t=document.createElement("div");t.classList.add("authorisation"),t.innerHTML='\n    <div class="authorisation-text">\n      <h1 class="authorisation-text-title">Готовы расширить Ваши возможности?</h1>\n      <h2 class="authorisation-text-subtitle">При авторизации для Вас станут доступны новые активности:</h2>\n      <ul class="authorisation-text-list">\n        <li class="authorisation-text-list-item">Статистика</li>\n        <li class="authorisation-text-list-item">Раздел "Сложные слова"</li>\n        <li class="authorisation-text-list-item">Изученные слова</li>\n      </ul>\n    </div>\n    <div class="authorisation-modal-container">\n      \n    </div>\n  ';const s=(e=>{const t=document.createElement("div");return t.classList.add("authorisation-modal"),t.innerHTML="registration"===e?'\n    <div class="authorisation-modal-title">Регистрация</div>\n      <form class="authorisation-modal-form">\n        <input type="text" class="authorisation-modal-form-name authorisation-modal-form-input" placeholder="Имя (3 знака минимум)" minlength="3" required>\n        <input type="email" class="authorisation-modal-form-email authorisation-modal-form-input" placeholder="Электронная почта" required autocomplete="email">\n        <input type="password" class="authorisation-modal-form-password authorisation-modal-form-input" placeholder="Пароль" minlength="8" required>\n        <button type="submit" class="authorisation-modal-form-submit button">Регистрация</button>\n      </form>\n      <div class="authorisation-modal-divider"></div>\n    <div class="authorisation-modal-state button">Вход</div>\n  ':'\n    <div class="authorisation-modal-title">Вход</div>\n      <form class="authorisation-modal-form">\n        <input type="email" class="authorisation-modal-form-email authorisation-modal-form-input" placeholder="Электронная почта" required>\n        <input type="password" class="authorisation-modal-form-password authorisation-modal-form-input" placeholder="Пароль" minlength="8" required>\n        <button type="submit" class="authorisation-modal-form-submit button">Вход</button>\n      </form>\n      <div class="authorisation-modal-divider"></div>\n    <div class="authorisation-modal-state button">Регистрация</div>\n  ',t})(e);return t.querySelector(".authorisation-modal-container").append(s),t},t.createProfile=()=>{sessionStorage.setItem("saved-page","profile");const e=document.createElement("div");e.classList.add("profile");const t=JSON.parse(localStorage.getItem("user"));return e.innerHTML=`\n    <div class="profile-text">\n      <h1 class="profile-title">Здравствуйте, ${t.name}!</h1>\n      <h2 class="profile-subtitle">Теперь для Вас доступны новые активности:</h2>\n      <ul class="profile-list">\n        <li class="profile-list-item">Статистика</li>\n        <li class="profile-list-item">Раздел "Сложные слова"</li>\n        <li class="profile-list-item">Изученные слова</li>\n      </ul>\n    </div>\n    <div class="profile-logout button">Выйти</div>\n  `,e},t.renderPage=()=>o(void 0,void 0,void 0,(function*(){let e=sessionStorage.getItem("saved-page");null===e&&(sessionStorage.setItem("saved-page","mainscreen"),e="mainscreen");const s=document.querySelector(".container"),o=document.querySelector(".main"),n=(()=>{const e=document.createElement("header");return e.classList.add("header"),e.innerHTML='\n    <div class="header-home">RS Lang</div>\n    <nav class="header-nav">\n      <div class="header-nav-textbook button">Учебник</div>\n      <div class="header-nav-stats button">Статистика</div>\n      <button class="header-nav-audio button">Аудиовызов</button>\n      <button class="header-nav-sprint button">Спринт</button>\n      <div class="header-nav-authorisation button">Авторизация</div>\n    </nav>\n  ',e})(),m=(()=>{const e=document.createElement("footer");return e.classList.add("footer"),e.innerHTML='\n    <a href="https://rs.school/"><img src="./assets/svg/rsschool-icon.svg" alt="rsschool" class="footer-logo"></a>\n    <div class="footer-descr">Created at 2021:\n      <a href="https://github.com/MaximFed91" class="footer-descr-link">@MaximFed91</a>\n      <a href="https://github.com/dumbus" class="footer-descr-link">@Dumbus</a>\n    </div>\n  ',e})();if(s.prepend(n),s.append(m),"mainscreen"===e){const e=(0,i.createMainscreen)();o.append(e)}if("textbook"===e){(0,c.addLoader)();const e=Number(sessionStorage.getItem("rs-group")),t=Number(sessionStorage.getItem("rs-page")),s=yield(0,a.createTextbook)(e,t);o.innerHTML="",o.append(s),yield(0,d.addTextbookListeners)()}if("authorisation"===e&&(o.append((0,t.createAuthorisation)()),(0,d.addAuthorisationListeners)()),"profile"===e&&(o.append((0,t.createProfile)()),(0,d.addProfileListeners)()),"statistics"===e)if("+"===localStorage.getItem("login")){(0,c.addLoader)();const e=JSON.parse(localStorage.getItem("user")),t=yield(0,l.getUserStatistics)(e.userId,e.token);o.innerHTML="",o.append((0,r.createStatistic)(t))}else o.append((0,t.createAuthorisation)()),(0,d.addAuthorisationListeners)();"audiocall"===e&&(u.default.inst=new u.default("audiocall"),u.default.textbook?u.default.inst.render(u.default.arrWords):u.default.inst.startPage()),"sprint"===e&&(u.default.inst=new u.default("sprint"),u.default.textbook?u.default.inst.render(u.default.arrWords):u.default.inst.startPage()),(0,d.addHeaderListeners)(),(0,c.disableButtonsForLearnedPages)()}))},517:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStatistic=void 0;const o=s(17);t.createStatistic=e=>{sessionStorage.setItem("saved-page","statistics");const t=document.createElement("div");t.className="statistics",t.innerHTML=`\n    <button class="close-game statistics__close">\n      <span class="close-game__span-1"></span>\n      <span class="close-game__span-2"></span>\n    </button>\n    <h1 class="statistics-title title">Статистика</h1>\n    <div class="statistics__main">\n      <div class="statistics__game">\n        <div class="statistics__game-sprint statistics__game-block">\n          <h3 class="statistics__game-title">Спринт</h3>\n          <p class="statistics__game-text">Количество новых слов за день <span>${e.optional.sprint.newWords}</span></p>\n          <p class="statistics__game-text">Процент правильных ответов <span>${e.optional.sprint.percent}%</span></p>\n          <p class="statistics__game-text">Лучший счет <span>${e.optional.sprint.bestResult}</span></p>\n        </div>\n        <div class="statistics__game-audiocall statistics__game-block">\n          <h3 class="statistics__game-title">Аудиовызов</h3>\n          <p class="statistics__game-text">Количество новых слов за день <span>${e.optional.audiocall.newWords}</span></p>\n          <p class="statistics__game-text">Процент правильных ответов <span>${e.optional.audiocall.percent}%</span></p>\n          <p class="statistics__game-text">Самая длинная серия правильных ответов <span>${e.optional.audiocall.bestResult}</span></p>\n        </div>\n      </div>\n      <div class="statistics__words">\n        <h3 class="statistics__words-title">Общая статистика за день</h3>\n        <p class="statistics__words-text">Количество новых слов <span>${e.optional.totalNewWord}</span></p>\n        <p class="statistics__words-text">Количество изученных слов <span>${e.learnedWords}</span></p>\n        <p class="statistics__words-text">Процент правильных ответов <span>${e.optional.totalPercent}%</span></p>\n      </div>\n    </div>`;const s=t.querySelector(".close-game"),n=document.querySelector(".main");return s.addEventListener("click",(()=>{n.innerHTML="",n.append((0,o.createMainscreen)())})),t}},398:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createTextbook=t.playAudio=void 0;const i=s(535),a=n(s(209)),r=s(605),d="https://rs-lang-bckend.herokuapp.com",c=(e,t="none",s=-1)=>{const o=Boolean(localStorage.getItem("login")),n=Number(sessionStorage.getItem("rs-group")),i=document.createElement("div");i.classList.add("textbook-word"),i.setAttribute("id",`word-${e.id}`);const{id:a,word:c,wordTranslate:l,image:u,textMeaning:m,textExample:p,transcription:h,textExampleTranslate:g,textMeaningTranslate:v,audio:f,audioMeaning:b,audioExample:y}=e;i.innerHTML=`\n    <img class="textbook-word-img" src="${d}/${u}" alt="${c}">\n    <div class="textbook-word-content">\n      <div class="textbook-word-content-title">${c} - ${h} - ${l}</div>\n      <div class="textbook-word-content-meaning">\n        ${m} - ${v}\n      </div>\n      <div class="textbook-word-content-example">\n        ${p} - ${g}\n      </div>\n      <div class="textbook-word-content-audiobtn button" id="${a}" data-word="${d}/${f}" data-meaning="${d}/${b}" data-example="${d}/${y}">\n        <img src="./assets/svg/headphones.svg" alt="audio">\n      </div>\n    </div>\n  `,i.setAttribute("data-difficulty",t);const _=i.querySelector(".textbook-word-content");if(o){const o=document.createElement("div");o.classList.add("textbook-word-content-btns");const a=document.createElement("div");a.classList.add("textbook-word-content-labels"),o.innerHTML='\n      <button class="textbook-word-content-btns-item textbook-word-content-btns-difficult button">Сложное слово</button>\n      <button class="textbook-word-content-btns-item textbook-word-content-btns-learned button">Изученное слово</button>\n      <button class="textbook-word-content-btns-item textbook-word-content-btns-remove button">Удалить из сложных</button>\n    ';const d=o.querySelector(".textbook-word-content-btns-difficult"),c=o.querySelector(".textbook-word-content-btns-learned"),l=o.querySelector(".textbook-word-content-btns-remove");d.setAttribute("id",`difficult-${e.id}`),d.setAttribute("data-difficulty",t),c.setAttribute("id",`learned-${e.id}`),c.setAttribute("data-difficulty",t),l.setAttribute("id",`difficult-${e.id}`),l.setAttribute("data-difficulty",t),"none"!==t&&("new"!==t&&a.append((0,r.createDifficultyLabel)(t)),"difficult"===t&&(d.disabled=!0),"done"===t&&(c.disabled=!0),0===s?i.classList.add("textbook-word-incorrect"):i.classList.add("textbook-word-correct")),6===n?(d.style.display="none",c.style.display="none"):l.style.display="none",_.prepend(a),_.append(o)}return i};t.playAudio=e=>{const t=[];t.push(e.getAttribute("data-word")),t.push(e.getAttribute("data-meaning")),t.push(e.getAttribute("data-example"));const s=document.querySelector("audio");let o=0;s.src=t[o],s.play(),s.onended=()=>{o!==t.length-1&&(o++,s.src=t[o],s.play())}},t.createTextbook=(e=0,t=0)=>o(void 0,void 0,void 0,(function*(){sessionStorage.setItem("saved-page","textbook");const s=Boolean(localStorage.getItem("login"));sessionStorage.setItem("rs-group",String(e)),sessionStorage.setItem("rs-page",String(t));const n=document.createElement("div");if(n.classList.add("textbook"),n.innerHTML=`\n    <nav class="textbook-nav">\n      <div class="textbook-nav-item" data-num="0">Группа 1</div>\n      <div class="textbook-nav-item" data-num="1">Группа 2</div>\n      <div class="textbook-nav-item" data-num="2">Группа 3</div>\n      <div class="textbook-nav-item" data-num="3">Группа 4</div>\n      <div class="textbook-nav-item" data-num="4">Группа 5</div>\n      <div class="textbook-nav-item" data-num="5">Группа 6</div>\n    </nav>\n    <h1 class="textbook-title title">Группа ${e+1}</h1>\n    <h2 class="textbook-subtitle subtitle">Страница ${t+1}</h2>\n    <nav class="textbook-pages">\n      <button class="textbook-pages-item textbook-pages-item-prev button">< Предыдущая</button>\n      <button class="textbook-pages-item textbook-pages-item-next button">Следующая ></button>\n    </nav>\n  `,6===e){const e=n.querySelector(".textbook-pages"),t=n.querySelector(".textbook-subtitle"),s=n.querySelector(".textbook-title");e.style.display="none",t.style.display="none",s.textContent="Сложные слова"}const d=yield((e,t)=>o(void 0,void 0,void 0,(function*(){const s=Boolean(localStorage.getItem("login")),o=document.createElement("div");o.classList.add("textbook-words");const n=[],d=[],l=[];if(s){const s=JSON.parse(localStorage.getItem("user")),{userId:u,token:m}=s;if(6===e){const e=yield(0,i.getUserWords)(u,m),t=[];if(e.forEach((e=>{"difficult"===e.difficulty&&t.push(e)})),0===t.length){const e=document.createElement("div");e.classList.add("textbook-words-none"),e.textContent="Вы ещё не добавили слова в раздел сложных...",o.append(e)}const s=[];for(const e of t){const t=yield(0,i.getWord)(e.optional.wordID);s.push(t);const n=c(t,"difficult",e.optional.correctAnswers);o.append(n)}a.default.arrWords=s}else{const s=yield(0,i.getWords)(e,t),p=yield(0,i.getUserWords)(u,m);p.forEach((e=>{n.push(e.optional.wordID),d.push(e.difficulty),l.push(e.optional.correctAnswers)}));const h=[];s.forEach((e=>{let t;const s=n.indexOf(e.id);-1!==s?(t=c(e,d[s],l[s]),"done"!==d[s]&&h.push(e)):(t=c(e),h.push(e)),o.append(t)})),a.default.arrWords=yield(0,r.addWordsForGame)(e,t,h,p)}}else{const s=yield(0,i.getWords)(e,t);a.default.arrWords=s,s.forEach((e=>{o.append(c(e))}))}return a.default.textbook=!0,o})))(e,t);if(n.append(d),s){const e=n.querySelector(".textbook-nav"),t=document.createElement("div");t.classList.add("textbook-nav-item"),t.setAttribute("data-num",String(6)),t.textContent="Сложные слова",e.append(t)}n.querySelectorAll(".button").forEach((t=>{t.classList.add(`button-${e+1}`)})),0===t&&(n.querySelector(".textbook-pages-item-prev").disabled=!0),29===t&&(n.querySelector(".textbook-pages-item-next").disabled=!0),n.querySelector(".textbook-title").classList.add(`title-${e+1}`),n.querySelector(".textbook-subtitle").classList.add(`subtitle-${e+1}`),n.querySelectorAll(".textbook-nav-item")[e].classList.add("textbook-nav-item-active");const l=document.createElement("audio");return l.classList.add("audio"),n.append(l),n}))},605:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(n,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function r(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.addWordsForGame=t.disableButtonsForLearnedPages=t.makeWordNew=t.makeWordLearned=t.makeWordDifficult=t.createDifficultyLabel=t.addLoader=t.randomArrNum=t.randomNoRepeatNum=t.randomInteger=t.shuffle=void 0;const n=s(535);function i(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}}function a(e,t){const s=e+Math.random()*(t+1-e);return Math.floor(s)}t.shuffle=i,t.randomInteger=a,t.randomNoRepeatNum=function e(t,s){let o=a(0,s);return o===t&&(o=e(t,s)),o},t.randomArrNum=function(e,t){const s=[e];for(;s.length<5;){const e=a(0,t);s.includes(e)||s.push(e)}return i(s),s},t.addLoader=()=>{const e=document.querySelector(".main"),t=document.createElement("div");t.classList.add("overlay-loader"),t.innerHTML='\n    <div class="lds-ring-loader">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  ',e.append(t)},t.createDifficultyLabel=e=>{const t=document.createElement("div");switch(t.classList.add("textbook-word-content-labels-item"),t.classList.add("label"),e){case"difficult":t.classList.add("label-difficult"),t.textContent="Сложное";break;case"done":t.classList.add("label-learned"),t.textContent="Изученное"}return t},t.makeWordDifficult=(e,s)=>o(void 0,void 0,void 0,(function*(){const o=JSON.parse(localStorage.getItem("user")),{userId:i,token:a}=o;let r;const d=document.querySelector(`#word-${e}`);"none"!==s?(r=yield(0,n.getUserWordById)(i,e,a),r.difficulty="difficult",yield(0,n.updateUserWord)(i,e,r,a),0!==r.optional.correctAnswers?(d.classList.remove("textbook-word-incorrect"),d.classList.add("textbook-word-correct")):(d.classList.remove("textbook-word-correct"),d.classList.add("textbook-word-incorrect"))):(r={difficulty:"difficult",optional:{wordID:e,correctAnswers:0}},yield(0,n.createUserWord)(i,e,r,a),d.classList.remove("textbook-word-correct"),d.classList.add("textbook-word-incorrect"),d.setAttribute("data-difficulty","difficult"));const c=d.querySelector(".textbook-word-content-labels");c.innerHTML="",c.append((0,t.createDifficultyLabel)("difficult"))})),t.makeWordLearned=(e,s)=>o(void 0,void 0,void 0,(function*(){const o=JSON.parse(localStorage.getItem("user")),{userId:i,token:a}=o;let r;"none"!==s?(r=yield(0,n.getUserWordById)(i,e,a),r.difficulty="done",r.optional.correctAnswers=1,yield(0,n.updateUserWord)(i,e,r,a)):(r={difficulty:"done",optional:{wordID:e,correctAnswers:1}},yield(0,n.createUserWord)(i,e,r,a));const d=document.querySelector(`#word-${e}`);d.classList.remove("textbook-word-incorrect"),d.classList.add("textbook-word-correct");const c=d.querySelector(".textbook-word-content-labels");c.innerHTML="",c.append((0,t.createDifficultyLabel)("done")),d.setAttribute("data-difficulty","done")})),t.makeWordNew=e=>o(void 0,void 0,void 0,(function*(){const t=JSON.parse(localStorage.getItem("user")),{userId:s,token:o}=t,i=yield(0,n.getUserWordById)(s,e,o);i.difficulty="new",yield(0,n.updateUserWord)(s,e,i,o),document.querySelector(`#word-${e}`).remove()})),t.disableButtonsForLearnedPages=()=>{const e=Boolean(localStorage.getItem("login")),t=document.querySelector(".header-nav-audio"),s=document.querySelector(".header-nav-sprint");if(e){const e=document.querySelectorAll(".textbook-word[data-difficulty='done']"),o=document.querySelectorAll(".textbook-word[data-difficulty='difficult']");if(20===e.length+o.length){const e=document.querySelector(".textbook-subtitle");"!"!==e.textContent[e.textContent.length-1]&&(e.textContent+=" - Изучена полностью!"),t.disabled=!0,s.disabled=!0}else t.disabled=!1,s.disabled=!1}else t.disabled=!1,s.disabled=!1},t.addWordsForGame=(e,s,i,a)=>o(void 0,void 0,void 0,(function*(){let o,r,d=i;if(i.length<20&&(5!==e||29!==s)){29===s?(o=e+1,r=0):(o=e,r=s+1);const i=yield(0,n.getWords)(o,r),c=[],l=[];a.forEach((e=>{c.push(e.optional.wordID),l.push(e.difficulty)})),i.forEach((e=>{const t=c.indexOf(e.id);-1!==t?"done"!==l[t]&&d.push(e):d.push(e)})),d.length<20&&(d=yield(0,t.addWordsForGame)(o,r,d,a))}return d}))}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{s(61);const e=s(535);(0,s(897).renderPage)(),(0,e.checkLogin)()})()})();